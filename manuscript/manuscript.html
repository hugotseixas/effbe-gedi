<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hugo Tameirão Seixas">
<meta name="author" content="Nathaniel Brunsell">

<title>Using remote sensing data to estimate short term effects of fire over forest aboveground biomass in the brazilian amazon</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="manuscript_files/libs/clipboard/clipboard.min.js"></script>
<script src="manuscript_files/libs/quarto-html/quarto.js"></script>
<script src="manuscript_files/libs/quarto-html/popper.min.js"></script>
<script src="manuscript_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="manuscript_files/libs/quarto-html/anchor.min.js"></script>
<link href="manuscript_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="manuscript_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="manuscript_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="manuscript_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="manuscript_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="manuscript_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="manuscript_files/libs/viz-1.8.2/viz.js"></script>
<link href="manuscript_files/libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="manuscript_files/libs/grViz-binding-1.0.9/grViz.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#materials-and-methods" id="toc-materials-and-methods" class="nav-link" data-scroll-target="#materials-and-methods">Materials and Methods</a>
  <ul class="collapse">
  <li><a href="#experiment-scopus" id="toc-experiment-scopus" class="nav-link" data-scroll-target="#experiment-scopus">Experiment Scopus</a></li>
  <li><a href="#experiment-design" id="toc-experiment-design" class="nav-link" data-scroll-target="#experiment-design">Experiment Design</a></li>
  <li><a href="#data-processing" id="toc-data-processing" class="nav-link" data-scroll-target="#data-processing">Data processing</a></li>
  <li><a href="#statistical-analysis" id="toc-statistical-analysis" class="nav-link" data-scroll-target="#statistical-analysis">Statistical analysis</a></li>
  <li><a href="#statistical-model-assumptions" id="toc-statistical-model-assumptions" class="nav-link" data-scroll-target="#statistical-model-assumptions">Statistical model assumptions</a></li>
  <li><a href="#sec-datasource" id="toc-sec-datasource" class="nav-link" data-scroll-target="#sec-datasource">Data Sources</a></li>
  <li><a href="#literature" id="toc-literature" class="nav-link" data-scroll-target="#literature">Literature</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#effect-of-fire-occurrence-over-forest-above-ground-biomass" id="toc-effect-of-fire-occurrence-over-forest-above-ground-biomass" class="nav-link" data-scroll-target="#effect-of-fire-occurrence-over-forest-above-ground-biomass">Effect of fire occurrence over forest above ground biomass</a></li>
  <li><a href="#sources-of-effect-heterogeneity" id="toc-sources-of-effect-heterogeneity" class="nav-link" data-scroll-target="#sources-of-effect-heterogeneity">Sources of effect heterogeneity</a></li>
  </ul></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a></li>
  <li><a href="#supporting-information" id="toc-supporting-information" class="nav-link" data-scroll-target="#supporting-information">Supporting Information</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Using remote sensing data to estimate short term effects of fire over forest aboveground biomass in the brazilian amazon</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <a href="https://hugotseixas.com/">Hugo Tameirão Seixas</a> 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            State University of Campinas
          </p>
      </div>
      <div class="quarto-title-meta-contents">
    Nathaniel Brunsell 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Kansas
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    The objective of this experiment is to estimate the effect of forest fire over the biomass of tropical rainforest in the brazillian amazon. The analysed aboveground biomass are predictions derived from Global Ecosystem Dynamics Investigation (GEDI) Level 4A (L4A) Version 2. The experimental design is based in the sampling areas of 25 hectares over the brazillian amazon biome, where burned forest areas are compared to intact forests. The fire estimates are derived from the Moderate Resolution Imaging Spectroradiometer (MODIS) Burned Area data product (MCD64A1 Version 6). We expect to estimate a distribution of effects for the entire biome, which will allow the discussion about its possible heterogeneity and confounders.
  </div>
</div>

</header>

<hr>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The effect of fire over forests have already been estimated in different studies. A field study found effects after a single burning event, in which the biomass reduction increased with more occurrences of fires <span class="citation" data-cites="Martins2012">(<a href="#ref-Martins2012" role="doc-biblioref">Silva Ramos Vieira Martins <em>et al.</em> 2012</a>)</span>. Studies also reported how trees characteristics also influence the impact of fire over forests <span class="citation" data-cites="Rocha2013">(<a href="#ref-Rocha2013" role="doc-biblioref">Rocha <em>et al.</em> 2013</a>)</span>.</p>
<hr>
</section>
<section id="objectives" class="level1">
<h1>Objectives</h1>
<p>The objectives of this project are:</p>
<ul>
<li><p>Estimate the effects of fire occurrence over tropical rain forest above ground biomass;</p></li>
<li><p>Identify the main drivers of heterogeneity of the effects;</p></li>
</ul>
<hr>
</section>
<section id="materials-and-methods" class="level1">
<h1>Materials and Methods</h1>
<section id="experiment-scopus" class="level3">
<h3 class="anchored" data-anchor-id="experiment-scopus">Experiment Scopus</h3>
<p>The experiment will be performed within the Brazilian boundaries of the Amazon biome, in which we will analyse its forests formations. The experiment will cover the period between 2000 to 2021. We will analyse forests formations of any characteristics, and forest fires of any characteristics.</p>
</section>
<section id="experiment-design" class="level3">
<h3 class="anchored" data-anchor-id="experiment-design">Experiment Design</h3>
<p>To estimate the effect of forest fires over forest formations, we are going to compare two different groups: the control group (NB), that are forest formations in which fire occurrence was not detected from 2010 to 2021 (in other words, we assume this area was not burned in this period); the event group (YB), that are forest formations in which fire occurrence was detected only in 2020, in the period between 2010 and 2021. We will calculate differences between both groups before and after 2020 (which is the year when the fire event occurred or not). We will adjust our estimates for distance of the forest formations to the edge of forest, which may cause possible bias in our analysis. A general overview of the experiment is shown in <a href="#fig-expdiag">Figure&nbsp;1</a>.</p>
<div class="cell">
<div id="fig-expdiag" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="htmlwidget-a33479c650e0219a99e0" style="width:100%;height:464px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-a33479c650e0219a99e0">{"x":{"diagram":"digraph expdiag {\n  \n  tooltip = \" \"\n  \n  graph [layout = dot, rankdir = TD, nodesep = 0.1, ranksep = 1,tooltip = \" \"]\n  \n  node [shape = box,\n        fontname = Helvetica,\n        style = filled,\n        fontcolor = \"#343a40\"\n        fillcolor = \"#f7f7f9\"\n        penwidth = 2.2,\n        width = 3,\n        height = 1.5,\n        fontsize = 20,\n        tooltip = \" \"]\n\n  edge [arrowsize = 2,\n        penwidth = 2.2,\n        tooltip = \" \"]\n\n  a [label = \"LULC data\"]\n  b [label = \"Fire data\"]\n  c [label = \"AGB data\"]\n  d [label = \"Treatment/Control \n samples\"]\n  e [label = \"Distance to border\"]\n  f [label = \"Fire occurrence\"]\n  g [label = \"Forest cover\"]\n  h [label = \"AGB loss\"]\n  \n  a -> d b -> d\n  c -> h e -> h f -> h g -> d\n  a -> g a -> e b -> f\n  d -> h\n  \n  \n  }","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p></p><figcaption class="figure-caption">Figure 1: Experiment design diagram.</figcaption><p></p>
</figure>
</div>
</div>
<p>To extract observations of each group, we will use land cover and fire occurrence data (<a href="#sec-datasource">Section&nbsp;3.0.6</a>). Only a small subset of the whole data available is going to be used to make inferences, and will be performed by a sampling scheme. The sampling scheme will consist of four steps: 1. randomly assign rectangles of ~10000km² inside the Brazilian Amazon biome, spaced at least by ~100km between each other, these are going to be named major sample cells (MaC); 2. randomly assign one rectangle of ~400km² inside each MaC, these are going to be named minor sample cells (MiC); 3. randomly assign 100 rectangles of ~0.25km² (50 NB rectangles and 50 YB rectangles) inside each MiC, NB rectangles will have to be at least 2km far from YB rectangles, these will be named observation cells (ObC); 4. extract values inside each ObC. This process will be repeat 100 times, in which we will shift the MaC positions to ensure more heterogeneity between sampling rounds.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-samp" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="manuscript_files/figure-html/fig-samp-1.png" class="img-fluid figure-img" alt="This is a diagram" width="672"></p>
<p></p><figcaption class="figure-caption">Figure 2: Sampling scheme.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>We are going to use the following variables: above ground biomass, fire frequency, fire occurrence in 2020, experiment group, forest cover percentage inside burned pixel, fragmentation of the sampling rectangle, distance of observations to border.</p>
<p>We will also apply a filter to the MiC, to avoid regions in which we don’t have a lot of areas of internet (areas where we can sample NB and YB observations). The rule will be that apt areas for both experiment groups should cover at least 30% of the MiC, each.</p>
</section>
<section id="data-processing" class="level3">
<h3 class="anchored" data-anchor-id="data-processing">Data processing</h3>
</section>
<section id="statistical-analysis" class="level3">
<h3 class="anchored" data-anchor-id="statistical-analysis">Statistical analysis</h3>
<p>To estimate the effect of fire occurrence over forest above ground biomass, we are using diff-in-diffs, by comparing the AGB values before and after the fire event for NB and YC areas. The analysis will be performed in a monthly time step, and will be represented as months before and after the event.</p>
<p>We will use a ordinary least squares regression to perform the estimations. Since we are analyzing spatial data, there is a possibility of spatial auto correlation to affect our statistical model, so we will analyse the model residuals to detect possible spatial dependence between observations. If the autocorrelation are found to be true, we will apply spatial regressions to try to adjust the model for spatial dependence.</p>
<p>By the end of the statistical analysis, each sampling rectangle will present an average effect estimation.</p>
<p>To analyse the heterogeneity of the effects of fire over above ground forest biomass, we will observe the range of effects found inside and between the ObCs.</p>
</section>
<section id="statistical-model-assumptions" class="level3">
<h3 class="anchored" data-anchor-id="statistical-model-assumptions">Statistical model assumptions</h3>
<p>The statistical model in this study assumes that the occurrence of droughts and the distance to the forest edge are confounders of the effect of fire over forest biomass. We will adjust our model to the distance of observations to forest edges explicitly, by adding this variable in the regression. We will avoid the confounding of droughts by analyzing the experiment groups in a relatively small region, in which will assume will present homogeneous climate characteristics.</p>
<p>We aknowledge that there are more confounders of the effect of fire over forest biomass, but these are difficult to add in our model, specially due to the large scale of the experiment. We will provide a diagram of all the possible confounders found in the literature, so that it can be compared to the diagram that expresses the statistical model of this project (<a href="#fig-dags">Figure&nbsp;3</a>).</p>
<div class="cell">
<div id="fig-dags" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div id="htmlwidget-bf7c61a9b3b5e7ba396d" style="width:100%;height:464px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-bf7c61a9b3b5e7ba396d">{"x":{"diagram":"digraph dags {\n  \n  tooltip = \" \"\n  \n  graph [layout = dot, rankdir = TD, nodesep = 0.3, ranksep = 1, tooltip = \" \"]\n  \n  edge [tooltip = \" \"]\n  \n  node [shape = box,\n        fontname = Helvetica,\n        style = filled,\n        fontcolor = \"#343a40\"\n        fillcolor = \"#f7f7f9\"\n        penwidth = 1.2,\n        fixedsize = true,\n        width = 0.8,\n        height = 0.8,\n        tooltip = \" \"]\n        \n  a [label = < <B>Fire<\/B> >]\n  b [label = < <B>AGB<\/B> >]\n  1 [label = < <B>Fire<\/B> >]\n  2 [label = < <B>AGB<\/B> >]\n  \n  node [shape = circle,\n        fontname = Helvetica,\n        style = filled,\n        fontcolor = \"#343a40\"\n        fillcolor = \"#f7f7f9\"\n        penwidth = 1.2,\n        fixedsize = true,\n        width = 1,\n        tooltip = \" \"]\n  \n  d [label = SL] # Selective Logging\n  e [label = TC] # Tree characteristics\n  f [label = Drought]\n  g [label = DTB]\n  3 [label = Drought]\n  4 [label = DTB]\n  \n  a -> b  \n  d -> b\n  e -> a e -> b\n  f -> a f -> b\n  g -> a g-> b g -> d\n  \n\n  \n  \n  1 -> 2\n  3 -> 1 3 -> 2\n  4 -> 2\n  \n  }","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p></p><figcaption class="figure-caption">Figure 3: DAGs. TODO: need to put a title for each DAG</figcaption><p></p>
</figure>
</div>
</div>
<p>We also make other assumptions for the statistical models:</p>
<ol type="1">
<li><p>The sampled forest areas are assumed to remain forests by all the period of the experiment;</p></li>
<li><p>We assume parallel trends between YB and NB groups (if fire did not occur in YB, differences between the two groups post-event period would remain the same in relation to the pre-event period)</p></li>
</ol>
</section>
<section id="sec-datasource" class="level3">
<h3 class="anchored" data-anchor-id="sec-datasource">Data Sources</h3>
<p>The fire occurrences are going to be extracted from MODIS MCD64A1 <span class="citation" data-cites="Giglio_2015">(<a href="#ref-Giglio_2015" role="doc-biblioref">Giglio <em>et al.</em> 2015</a>)</span> Version 6 product, which provides world wide burned area estimates from 2000 to 2022. The spatial resolution is approximately 500 meters. Maybe change it to the Global Fire Emissions Database (GBEF)</p>
<p>Forest cover will be represented by the Global Forest Change (1.9) <span class="citation" data-cites="Hansen_2013">(<a href="#ref-Hansen_2013" role="doc-biblioref">Hansen <em>et al.</em> 2013</a>)</span>, which provide forest cover loss from 2000 to 2021. The spatial resolution is approximately 30 meters.</p>
<p>Biomass estimates will be provided by the GEDI L4A 2.1 Footprint Level Above ground Biomass Density product <span class="citation" data-cites="Dubayah_2022">(<a href="#ref-Dubayah_2022" role="doc-biblioref">Dubayah <em>et al.</em> 2022</a>)</span>, with temporal extent from 2019 to 2022. The spatial resolution is approximately 25 meters.</p>
</section>
<section id="literature" class="level3">
<h3 class="anchored" data-anchor-id="literature">Literature</h3>
<p>The discussion of our results are going to be discussed against a predefined literature. We performed a search in the Scopus database.</p>
<blockquote class="blockquote">
<p>TITLE-ABS-KEY((fire OR burn) W/10 (forest OR tree) W/10 (carbon OR biomass OR cover OR volume OR density)) AND TITLE-ABS-KEY(amazon) AND (LIMIT-TO(LANGUAGE, “English”))</p>
</blockquote>
<p>The search returned 106 results, after screening (the strategy was to read titles and abstract, and select studies related to the estimation of the effect of fire occurrence over forest biomass).</p>
<p>The literature will serve, besides providing the theoretical foundation for the project development and future discussions, as a base to identify possible causes of forest above ground biomass loss. A DAG will be created with information obtained from the literature, and will be compared to the DAG of this experiment.</p>
<hr>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<section id="effect-of-fire-occurrence-over-forest-above-ground-biomass" class="level3">
<h3 class="anchored" data-anchor-id="effect-of-fire-occurrence-over-forest-above-ground-biomass">Effect of fire occurrence over forest above ground biomass</h3>
<p>We will show a table with the summary values of our model.</p>
<p>We will present a figure using lines (average values) and shaded areas (uncertainty of values) to represent the biomass variation along the months from 2019 to 2021.</p>
<p>We will also present density plots showing the average effect and the uncertainty of the effect.</p>
</section>
<section id="sources-of-effect-heterogeneity" class="level3">
<h3 class="anchored" data-anchor-id="sources-of-effect-heterogeneity">Sources of effect heterogeneity</h3>
<p>We will show a map with hexagonal grid to represent spatial heterogeneity of the effects.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="exp_agg.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Experiment Aggregation</figcaption><p></p>
</figure>
</div>
<hr>
</section>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<p>Compare our results with values found in field experiments and from other models.</p>
<p>Discuss probable sources of uncertainties and heterogeneity of the effects.</p>
<p>Provide further paths for the area of study.</p>
<hr>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<hr>
</section>
<section id="supporting-information" class="level1">
<h1>Supporting Information</h1>
<p>Provide all code and data to ensure transparency and reproducibility.</p>
</section>
<section id="references" class="level1 unnumbered">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="doc-bibliography">
<div id="ref-Dubayah_2022" class="csl-entry" role="doc-biblioentry">
Dubayah RO, Armston J, Kellner JR, <em>et al.</em> 2022. <a href="https://doi.org/10.3334/ORNLDAAC/2056">GEDI L4A footprint level aboveground biomass density, version 2.1</a>.
</div>
<div id="ref-Giglio_2015" class="csl-entry" role="doc-biblioentry">
Giglio L, Justice C, Boschetti L, and Roy D. 2015. <a href="https://doi.org/10.5067/MODIS/MCD64A1.006">MCD64A1 MODIS/terra+aqua burned area monthly L3 global 500m SIN grid V006</a>.
</div>
<div id="ref-Hansen_2013" class="csl-entry" role="doc-biblioentry">
Hansen MC, Potapov PV, Moore R, <em>et al.</em> 2013. <a href="https://doi.org/10.1126/science.1244693">High-resolution global maps of 21st-century forest cover change</a>. <em>Science</em> <strong>342</strong>: 850–3.
</div>
<div id="ref-Rocha2013" class="csl-entry" role="doc-biblioentry">
Rocha W, Metcalfe DB, Doughty CE, <em>et al.</em> 2013. <a href="https://doi.org/10.1080/17550874.2013.798368">Ecosystem productivity and carbon cycling in intact and annually burnt forest at the dry southern limit of the amazon rainforest (mato grosso, brazil)</a>. <em>Plant Ecology &amp; Diversity</em> <strong>7</strong>: 25–40.
</div>
<div id="ref-Martins2012" class="csl-entry" role="doc-biblioentry">
Silva Ramos Vieira Martins F da, Xaud HAM, Santos JR dos, and Galvão LS. 2012. <a href="https://doi.org/10.1017/s0266467412000636">Effects of fire on above-ground forest biomass in the northern brazilian amazon</a>. <em>Journal of Tropical Ecology</em> <strong>28</strong>: 591–601.
</div>
</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><div>Licensed by CC BY-NC-ND 4.0</div></div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>